<!doctype html>
<html class="bg-gray-200">
  <head>
    <%- include("./_shared/head.ejs", {
      title: "How Doxxed Am I?",
      description: "Your onchain activity might be exposing more about you than you think.",
      frame: {
        version: "next",
        imageUrl: "https://howdoxxed.xyz/doxxie.7f6f3970.png",
        button: {
          title: "ðŸš© Start",
          action: {
            type: "launch_frame",
            url: "https://howdoxxed.xyz",
            name:"How Doxxed Am I?",
            splashImageUrl: "https://howdoxxed.xyz/doxxie.7f6f3970.png",
            splashBackgroundColor:"#f5f0ec"
          }
        }
            }
    }) %>
    <link rel="stylesheet" href="/site/styles/magnify.css">
  </head>
  <body class="min-h-screen p-4">
    <!-- Main Content -->
    <main class="w-full max-w-xl mx-auto mt-4">
      <!-- Landing Page Content -->
      <div id="landing-content" class="text-center">
        <!-- Logo -->
        <img src="./images/doxxie.png" alt="How Doxxed Am I? Logo" class="h-28 mx-auto mb-4">

        <!-- Title -->
        <h1 class="text-4xl font-mono mb-6 text-center">HOW DOXXED AM I?</h1>

        <!-- Subtitle -->
        <p class="text-xl mb-10 max-w-lg mx-auto px-4">
          Your on-chain and browsing activity may be exposing more than you think.
        </p>

        <!-- Search Section -->
        <section id="search-section">
          <form id="search-form" class="relative max-w-xl mx-auto">
            <input
              type="search"
              name="wallet-address"
              id="wallet-address"
              placeholder="Wallet Address or ENS"
              class="w-full px-6 py-4 text-base border-2 border-black rounded-lg shadow-lg pl-6 pr-16"
              required
              autocomplete="off"
              autocorrect="off"
              autocapitalize="off"
              spellcheck="false"
              autofocus
            >
            <button type="submit" class="absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer opacity-50 hover:opacity-100 transition-opacity">
              <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
              </svg>
            </button>
          </form>
        </section>

        <!-- Feature Grid -->
        <section class="max-w-md mx-auto">
          <p class="text-base px-4 mt-4 mb-10 text-center max-w-md mx-auto text-gray-500">
            See what an attacker can learn about you from 100% public information.
          </p>

          <div class="grid grid-cols-3 gap-8 mb-4">
            <!-- Location -->
            <div class="flex flex-col items-center">
              <img src="./images/icons/globe.svg" alt="Location" class="h-8">
              <span class="text-lg">Location</span>
            </div>

            <!-- Relationships -->
            <div class="flex flex-col items-center">
              <img src="./images/icons/connect.svg" alt="Relationships" class="h-8">
              <span class="text-lg">Relationships</span>
            </div>

            <!-- Assets -->
            <div class="flex flex-col items-center">
              <img src="./images/icons/dollar.svg" alt="Assets" class="h-8">
              <span class="text-lg">Assets</span>
            </div>
          </div>

          <!-- Second Row Grid -->
          <div class="grid grid-cols-2 mb-12">
            <!-- Names & Pseudonyms -->
            <div class="flex flex-col items-center">
              <img src="./images/ens.svg" alt="Names" class="h-8">
              <span class="text-base">Names &<br/>Pseudonyms</span>
            </div>

            <!-- Connected Wallets -->
            <div class="flex flex-col items-center">
              <img src="./images/icons/wallet.svg" alt="Wallet" class="h-8">
              <span class="text-base">Connected<br/>Wallets</span>
            </div>
          </div>
        </section>


        <!-- Powered By Section -->
        <footer class="mb-6">
          <!-- <p class="text-sm mb-2 font-mono text-center">POWERED BY</p> -->
          <!-- <div class="flex justify-center items-center gap-10"> -->
            <!-- <img src="./images/1inch.png" alt="ENS" class="h-12"> -->
            <!-- <img src="./images/world.png" alt="Worldcoin" class="h-10"> -->
            <!-- <img src="./images/ens.svg" alt="ENS" class="h-12"> -->
            <!-- <img src="./images/farcaster.svg" alt="Farcaster" class="h-10"> -->
          <!-- </div> -->
        </footer>
      </div>

      <!-- Loading Screen (Hidden by default) -->
      <div id="loading-screen" class="hidden fixed inset-0 bg-gray-200 bg-opacity-90 flex items-center justify-center z-50">
        <div class="text-center">
          <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-black mx-auto mb-4"></div>
          <p class="font-mono text-lg" id="loading-message">Analyzing wallet...</p>
          <div class="hidden" id="loading-messages">
            <span>Putting on black hat...</span>
            <span>Following the money...</span>
            <span>Scanning your iris...</span>
            <span>Pinpointing latitude and longitude...</span>
            <span>Reticulating splines...</span>
            <span>Analyzing transaction patterns...</span>
            <span>Admiring your NFT collection...</span>
            <span>Evaluating your FOMO level...</span>
            <span>Analyzing browser fingerprint...</span>
            <span>Following the breadcrumbs...</span>
          </div>
        </div>
      </div>

      <!-- Results Section (Hidden by default) -->
      <section id="results-section" class="hidden">
        <!-- Back Button -->
        <div class="mx-auto mb-8">
          <button id="back-button" class="flex items-center gap-2 text-sm font-mono hover:opacity-70 transition-opacity">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7"/>
            </svg>
            BACK
          </button>
        </div>

        <!-- Wallet Address -->
        <div class="mx-auto mb-12">
          <div class="flex items-center gap-2">
            <img src="./images/icons/wallet.svg" alt="Wallets" class="h-4">
            <h2 class="font-mono text-sm tracking-wider">Wallet</h2>
          </div>
          <p class="font-mono text-xs text-gray-500 mt-1 break-all" id="wallet-address-resolved"></p>
        </div>

        <!-- Main Content -->
        <div class="mx-auto space-y-12">
          <!-- Portfolio Section -->
          <section>
            <div class="flex items-center gap-2 mb-2">
              <img src="./images/icons/dollar.svg" alt="Portfolio" class="h-4">
              <h2 class="font-mono text-sm tracking-wider"><strike class="mr-2 text-gray-500">Portfolio</strike>PRIZE MONEY?</h2>
            </div>
            <div class="flex items-baseline gap-3 mb-4">
              <span class="text-4xl font-mono font-bold tracking-wider" id="portfolio-value">$...</span>
              <span class="text-red-500 font-mono">-...</span>
            </div>
            <div class="h-24 w-full">
              <canvas id="portfolio-chart"></canvas>
            </div>
          </section>

          <!-- ENS Names -->
          <section>
            <div class="flex items-center gap-2 mb-4">
              <img src="./images/ens.svg" alt="ENS" class="h-4">
              <h2 class="font-mono text-sm tracking-wider"><strike class="mr-4 text-gray-500">ENS</strike>SOCIAL ACCOUNTS?</h2>
            </div>
            <div class="font-mono text-sm flex flex-wrap gap-4" id="ens-names">
              <!-- ENS names will be populated here -->
            </div>
          </section>

          <!-- Wallet Relationships -->
          <section>
            <div class="flex items-center gap-2 mb-4">
              <img src="./images/icons/connect.svg" alt="Relationships" class="h-4">
              <h2 class="font-mono text-sm tracking-wider"><strike class="mr-4 text-gray-500">Transactions</strike>RELATED ADDRESSES?</h2>
            </div>
            <h3 class="font-mono text-xs text-gray-500 mb-3">FREQUENTLY TRANSACTED ADDRESSES</h3>
            <div class="flex flex-col md:flex-row md:items-center">
              <div class="font-mono text-xs max-w-xs md:flex-1">
                <div id="wallet-relationships">
                  <!-- Relationships will be populated here -->
                </div>
              </div>
              <div class="mt-4 relative min-h-48 max-w-sm md:flex-1 md:mt-0" id="bubble-chart">
                <!-- Dynamic bubbles will be populated here -->
              </div>
            </div>
          </section>

          <!-- Location Data -->
          <section>
            <div class="flex items-center gap-2 mb-4">
              <img src="./images/icons/globe.svg" alt="Location" class="h-4">
              <h2 class="font-mono text-sm tracking-wider"><strike class="mr-4 text-gray-500">Txn Timing</strike>SLEEP HABITS?</h2>
            </div>
            <h3 class="font-mono text-xs text-gray-500 mb-3">OUTGOING TRANSACTIONS BY TIME (UTC)</h3>
            <div class="space-y-2 mb-6" id="timezone-data">
              <!-- Timezone data will be populated here -->
            </div>
          </section>

          <!-- IP Address -->
          <section>
            <div class="flex items-center gap-2 mb-4">
              <img src="./images/icons/fingerprint.svg" alt="Browser" class="h-4">
              <h2 class="font-mono text-sm tracking-wider"><strike class="mr-4 text-gray-500">IP Address</strike>LOCATION?</h2>
            </div>
            <div id="location-map" class="mt-4 h-48 w-full rounded-lg border border-black"></div>
          </section>

          <!-- Browser Fingerprint -->
          <section>
            <div class="flex items-center gap-2 mb-4">
              <img src="./images/icons/fingerprint.svg" alt="Browser" class="h-4">
              <h2 class="font-mono text-sm tracking-wider"><strike class="mr-4 text-gray-500">Web2 Browser</strike>ATTACK VECTORS?</h2>
            </div>
            <div class="space-y-2" id="browser-fingerprint">
              <!-- Browser fingerprint data will be populated here -->
            </div>
          </section>
        </div>
      </section>
    </main>

    <script defer type="module" src="/site/index.js"></script>
    <script defer src="/site/scripts/magnify.js"></script>
  </body>
</html>
